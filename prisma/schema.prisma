generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model posts {
  postId         Int              @id @default(autoincrement())
  title          String           @db.VarChar(75)
  createdAt      DateTime?        @default(now()) @db.Timestamptz(6)
  modifiedAt     DateTime?        @db.Timestamptz(6)
  content        String
  published      Boolean?         @default(false)
  authorId       Int
  categories     Int[]
  postCategories postCategories[]
  users          users            @relation(fields: [authorId], references: [userId], onDelete: NoAction, onUpdate: NoAction, map: "author")
}

model users {
  userId   Int     @id @default(autoincrement())
  name     String  @db.VarChar(45)
  email    String  @unique(map: "email_unq") @db.VarChar(255)
  password String
  role     String? @default("user")
  bio      String?
  posts    posts[]
}

model categories {
  categoryId     Int              @id @default(autoincrement())
  categoryName   String           @unique(map: "unique_name")
  postCategories postCategories[]
}

model postCategories {
  postId     Int
  categoryId Int
  categories categories @relation(fields: [categoryId], references: [categoryId], onDelete: NoAction, onUpdate: NoAction, map: "fk_categories")
  posts      posts      @relation(fields: [postId], references: [postId], onDelete: NoAction, onUpdate: NoAction, map: "fk_post")

  @@id([postId, categoryId])
}
